# WF0001

<table>
<tr>
  <td>Diagnostic ID</td>
  <td>WF0001</td>
</tr>
<tr>
  <td>Category</td>
  <td>Usage</td>
</tr>
<tr>
  <td>Severity</td>
  <td>Warning</td>
</tr>
</table>

## Rule description

This rule reports cases where the Temporal Workflow definition uses non-deterministic code - either directly in the Workflow definition or in a function called by the Workflow.
This rule traverses through the Syntax Tree of the Temporal Workflow definition and checks for pre-determined non-deterministic code.
### Randomization and Cryptography
- [System.Random](https://learn.microsoft.com/en-us/dotnet/api/system.random) - Using a pseudo-random number generator.
- [System.Guid.NewGuid](https://learn.microsoft.com/en-us/dotnet/api/system.guid.newguid) - Using a method to get a new pseudo-random Guid.
- [System.Guid.CreateVersion7](https://learn.microsoft.com/en-us/dotnet/api/system.guid.createversion7) - Using a method to get a new pseudo-random Guid according to RFC 9562.
- [System.Security.Cryptography.RandomNumberGenerator](https://learn.microsoft.com/en-us/dotnet/api/system.security.cryptography.randomnumbergenerator) - Using a cryptographically strong random number generator.

### Date and Time
- [System.DateTime.Now](https://learn.microsoft.com/en-us/dotnet/api/system.datetime.now) - Using DateTime object property whose value is the current local date and time.
- [System.DateTime.UtcNow](https://learn.microsoft.com/en-us/dotnet/api/system.datetime.utcnow) - Using DateTime object property whose value is the current UTC date and time.
- [System.DateTime.Today](https://learn.microsoft.com/en-us/dotnet/api/system.datetime.today) - Using DateTime object property whose value is the today's date.

### Networking (System.Net)
- [System.Net.Http.HttpClient.GetAsync](https://learn.microsoft.com/en-us/dotnet/api/system.net.http.httpclient.getasync) - Sends an HTTP GET request with unpredictable network latency and responses
- [System.Net.Http.HttpClient.PostAsync](https://learn.microsoft.com/en-us/dotnet/api/system.net.http.httpclient.postasync) - Sends an HTTP POST request with unpredictable network responses
- [System.Net.Http.HttpClient.PutAsync](https://learn.microsoft.com/en-us/dotnet/api/system.net.http.httpclient.putasync) - Sends an HTTP PUT request with unpredictable network responses
- [System.Net.Http.HttpClient.DeleteAsync](https://learn.microsoft.com/en-us/dotnet/api/system.net.http.httpclient.deleteasync) - Sends an HTTP DELETE request with unpredictable network responses
- [System.Net.Http.HttpClient.SendAsync](https://learn.microsoft.com/en-us/dotnet/api/system.net.http.httpclient.sendasync) - Sends HTTP requests with unpredictable network behavior
- [System.Net.Http.HttpClient.GetStringAsync](https://learn.microsoft.com/en-us/dotnet/api/system.net.http.httpclient.getstringasync) - Downloads string content with unpredictable network responses
- [System.Net.Http.HttpClient.GetByteArrayAsync](https://learn.microsoft.com/en-us/dotnet/api/system.net.http.httpclient.getbytearrayasync) - Downloads binary content with unpredictable network responses
- [System.Net.Http.HttpClient.GetStreamAsync](https://learn.microsoft.com/en-us/dotnet/api/system.net.http.httpclient.getstreamasync) - Downloads stream content with unpredictable network responses
- [System.Net.Dns.GetHostAddresses](https://learn.microsoft.com/en-us/dotnet/api/system.net.dns.gethostaddresses) - Performs DNS resolution with variable results and timing
- [System.Net.Dns.GetHostEntry](https://learn.microsoft.com/en-us/dotnet/api/system.net.dns.gethostentry) - Performs DNS resolution with variable results and timing
- [System.Net.Dns.GetHostByName](https://learn.microsoft.com/en-us/dotnet/api/system.net.dns.gethostbyname) - Performs DNS resolution with variable results and timing
- [System.Net.WebClient.DownloadString](https://learn.microsoft.com/en-us/dotnet/api/system.net.webclient.downloadstring) - Downloads web content with unpredictable responses
- [System.Net.WebClient.DownloadData](https://learn.microsoft.com/en-us/dotnet/api/system.net.webclient.downloaddata) - Downloads web data with unpredictable responses
- [System.Net.WebClient.UploadString](https://learn.microsoft.com/en-us/dotnet/api/system.net.webclient.uploadstring) - Uploads data with unpredictable network behavior
- [System.Net.WebClient.UploadData](https://learn.microsoft.com/en-us/dotnet/api/system.net.webclient.uploaddata) - Uploads data with unpredictable network behavior
- [System.Net.Sockets.Socket.Connect](https://learn.microsoft.com/en-us/dotnet/api/system.net.sockets.socket.connect) - Establishes network connections with variable timing and success
- [System.Net.Sockets.Socket.Accept](https://learn.microsoft.com/en-us/dotnet/api/system.net.sockets.socket.accept) - Accepts incoming connections with unpredictable timing
- [System.Net.Sockets.Socket.Receive](https://learn.microsoft.com/en-us/dotnet/api/system.net.sockets.socket.receive) - Receives network data with variable timing and content
- [System.Net.Sockets.Socket.Send](https://learn.microsoft.com/en-us/dotnet/api/system.net.sockets.socket.send) - Sends network data with variable timing and success
- [System.Net.NetworkInformation.NetworkInterface.GetAllNetworkInterfaces](https://learn.microsoft.com/en-us/dotnet/api/system.net.networkinformation.networkinterface.getallnetworkinterfaces) - Returns current network interface state that can change over time
- [System.Net.NetworkInformation.IPGlobalProperties.GetIPGlobalProperties](https://learn.microsoft.com/en-us/dotnet/api/system.net.networkinformation.ipglobalproperties.getipglobalproperties) - Returns current network properties that can change over time

### File I/O (System.IO)
- [System.IO.File.ReadAllText](https://learn.microsoft.com/en-us/dotnet/api/system.io.file.readalltext) - Reads file content that can change between workflow executions
- [System.IO.File.ReadAllBytes](https://learn.microsoft.com/en-us/dotnet/api/system.io.file.readallbytes) - Reads file content that can change between workflow executions
- [System.IO.File.WriteAllText](https://learn.microsoft.com/en-us/dotnet/api/system.io.file.writealltext) - Modifies external state outside the workflow
- [System.IO.File.WriteAllBytes](https://learn.microsoft.com/en-us/dotnet/api/system.io.file.writeallbytes) - Modifies external state outside the workflow
- [System.IO.File.Exists](https://learn.microsoft.com/en-us/dotnet/api/system.io.file.exists) - File existence can change between workflow executions
- [System.IO.File.GetCreationTime](https://learn.microsoft.com/en-us/dotnet/api/system.io.file.getcreationtime) - Returns file timestamps that vary by execution environment
- [System.IO.File.GetLastWriteTime](https://learn.microsoft.com/en-us/dotnet/api/system.io.file.getlastwritetime) - Returns file timestamps that vary by execution environment
- [System.IO.File.GetAttributes](https://learn.microsoft.com/en-us/dotnet/api/system.io.file.getattributes) - File attributes can change between workflow executions
- [System.IO.Directory.GetFiles](https://learn.microsoft.com/en-us/dotnet/api/system.io.directory.getfiles) - Directory contents can change between workflow executions
- [System.IO.Directory.GetDirectories](https://learn.microsoft.com/en-us/dotnet/api/system.io.directory.getdirectories) - Directory contents can change between workflow executions
- [System.IO.Directory.Exists](https://learn.microsoft.com/en-us/dotnet/api/system.io.directory.exists) - Directory existence can change between workflow executions
- [System.IO.Directory.GetCreationTime](https://learn.microsoft.com/en-us/dotnet/api/system.io.directory.getcreationtime) - Returns directory timestamps that vary by execution environment
- [System.IO.Directory.GetLastWriteTime](https://learn.microsoft.com/en-us/dotnet/api/system.io.directory.getlastwritetime) - Returns directory timestamps that vary by execution environment
- [System.IO.FileStream.Read](https://learn.microsoft.com/en-us/dotnet/api/system.io.filestream.read) - Reads file content that can change between workflow executions
- [System.IO.FileStream.Write](https://learn.microsoft.com/en-us/dotnet/api/system.io.filestream.write) - Modifies external state outside the workflow
- [System.IO.Stream.ReadByte](https://learn.microsoft.com/en-us/dotnet/api/system.io.stream.readbyte) - Reads data that can vary between workflow executions
- [System.IO.Stream.WriteByte](https://learn.microsoft.com/en-us/dotnet/api/system.io.stream.writebyte) - Modifies external state outside the workflow
- [System.IO.StreamReader.ReadLine](https://learn.microsoft.com/en-us/dotnet/api/system.io.streamreader.readline) - Reads content that can change between workflow executions
- [System.IO.StreamReader.ReadToEnd](https://learn.microsoft.com/en-us/dotnet/api/system.io.streamreader.readtoend) - Reads content that can change between workflow executions

### Threading and Timing (System.Threading)
- [System.Threading.Thread.Sleep](https://learn.microsoft.com/en-us/dotnet/api/system.threading.thread.sleep) - Introduces non-deterministic timing delays
- [System.Threading.Task.Delay](https://learn.microsoft.com/en-us/dotnet/api/system.threading.tasks.task.delay) - Introduces non-deterministic timing delays
- [System.Threading.Task.Run](https://learn.microsoft.com/en-us/dotnet/api/system.threading.tasks.task.run) - Executes code on unpredictable thread pool threads
- [System.Threading.Timer](https://learn.microsoft.com/en-us/dotnet/api/system.threading.timer) - Creates timers with non-deterministic execution timing
- [System.Threading.PeriodicTimer.WaitForNextTickAsync](https://learn.microsoft.com/en-us/dotnet/api/system.threading.periodictimer.waitfornexttickasync) - Waits for timer ticks with non-deterministic timing
- [System.Threading.Monitor.Wait](https://learn.microsoft.com/en-us/dotnet/api/system.threading.monitor.wait) - Blocks thread with unpredictable wait times
- [System.Threading.Monitor.Pulse](https://learn.microsoft.com/en-us/dotnet/api/system.threading.monitor.pulse) - Signals threads with non-deterministic timing
- [System.Threading.Semaphore.WaitOne](https://learn.microsoft.com/en-us/dotnet/api/system.threading.semaphore.waitone) - Blocks thread with unpredictable wait times
- [System.Threading.ManualResetEvent.WaitOne](https://learn.microsoft.com/en-us/dotnet/api/system.threading.manualresetevent.waitone) - Blocks thread with unpredictable wait times
- [System.Threading.ThreadPool.QueueUserWorkItem](https://learn.microsoft.com/en-us/dotnet/api/system.threading.threadpool.queueuserworkitem) - Executes work on unpredictable thread pool threads

### Environment Information (System.Environment)
- [System.Environment.TickCount](https://learn.microsoft.com/en-us/dotnet/api/system.environment.tickcount) - Returns system uptime that varies between executions
- [System.Environment.TickCount64](https://learn.microsoft.com/en-us/dotnet/api/system.environment.tickcount64) - Returns system uptime that varies between executions
- [System.Environment.MachineName](https://learn.microsoft.com/en-us/dotnet/api/system.environment.machinename) - Returns machine name that varies by execution environment
- [System.Environment.UserName](https://learn.microsoft.com/en-us/dotnet/api/system.environment.username) - Returns current user name that varies by execution environment
- [System.Environment.UserDomainName](https://learn.microsoft.com/en-us/dotnet/api/system.environment.userdomainname) - Returns user domain that varies by execution environment
- [System.Environment.ProcessorCount](https://learn.microsoft.com/en-us/dotnet/api/system.environment.processorcount) - Returns CPU count that varies by execution environment
- [System.Environment.WorkingSet](https://learn.microsoft.com/en-us/dotnet/api/system.environment.workingset) - Returns memory usage that varies between executions
- [System.Environment.GetEnvironmentVariable](https://learn.microsoft.com/en-us/dotnet/api/system.environment.getenvironmentvariable) - Returns environment variables that vary by execution environment
- [System.Environment.GetEnvironmentVariables](https://learn.microsoft.com/en-us/dotnet/api/system.environment.getenvironmentvariables) - Returns environment variables that vary by execution environment
- [System.Environment.ExpandEnvironmentVariables](https://learn.microsoft.com/en-us/dotnet/api/system.environment.expandenvironmentvariables) - Expands variables that vary by execution environment
- [System.Environment.CurrentDirectory](https://learn.microsoft.com/en-us/dotnet/api/system.environment.currentdirectory) - Returns current directory that varies by execution environment
- [System.Environment.SystemDirectory](https://learn.microsoft.com/en-us/dotnet/api/system.environment.systemdirectory) - Returns system directory that varies by execution environment
- [System.Environment.GetFolderPath](https://learn.microsoft.com/en-us/dotnet/api/system.environment.getfolderpath) - Returns folder paths that vary by execution environment
- [System.Environment.GetLogicalDrives](https://learn.microsoft.com/en-us/dotnet/api/system.environment.getlogicaldrives) - Returns drive list that varies by execution environment
- [System.Environment.CommandLine](https://learn.microsoft.com/en-us/dotnet/api/system.environment.commandline) - Returns command line arguments that vary between executions
- [System.Environment.ExitCode](https://learn.microsoft.com/en-us/dotnet/api/system.environment.exitcode) - Returns/sets exit code that varies between executions

### Process and Diagnostics (System.Diagnostics)
- [System.Diagnostics.Process.Start](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.process.start) - Starts external processes with unpredictable execution and timing
- [System.Diagnostics.Process.GetProcesses](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.process.getprocesses) - Returns current running processes that vary between executions
- [System.Diagnostics.Process.GetCurrentProcess](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.process.getcurrentprocess) - Returns current process information that varies between executions
- [System.Diagnostics.Process.Kill](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.process.kill) - Terminates processes, modifying external state
- [System.Diagnostics.PerformanceCounter.NextValue](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.performancecounter.nextvalue) - Returns performance metrics that vary between executions
- [System.Diagnostics.PerformanceCounter.RawValue](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.performancecounter.rawvalue) - Returns performance metrics that vary between executions
- [System.Diagnostics.PerformanceCounterCategory.GetCounters](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.performancecountercategory.getcounters) - Returns performance counters that vary between executions
- [System.Diagnostics.EventLog.WriteEntry](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.eventlog.writeentry) - Writes to event log, modifying external state
- [System.Diagnostics.EventLog.GetEventLogs](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.eventlog.geteventlogs) - Returns event logs that vary between executions
- [System.Diagnostics.Stopwatch.StartNew](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.stopwatch.startnew) - Creates timing measurements that vary between executions
- [System.Diagnostics.Stopwatch.Start](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.stopwatch.start) - Starts timing measurements that vary between executions
- [System.Diagnostics.Stopwatch.Stop](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.stopwatch.stop) - Stops timing measurements that vary between executions
- [System.Diagnostics.Stopwatch.ElapsedMilliseconds](https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.stopwatch.elapsedmilliseconds) - Returns elapsed time that varies between executions

### Registry Access (Windows)
- [Microsoft.Win32.Registry.GetValue](https://learn.microsoft.com/en-us/dotnet/api/microsoft.win32.registry.getvalue) - Reads Windows registry values that vary by execution environment
- [Microsoft.Win32.RegistryKey.GetValueNames](https://learn.microsoft.com/en-us/dotnet/api/microsoft.win32.registrykey.getvaluenames) - Returns registry value names that vary by execution environment

## How to fix violations

To fix a violation of this rule:

* Ensure non-deterministic code is not used in the Temporal Workflow definition or in a function called by the Workflow.
* Use Temporal's built-in [workflow utilities](https://github.com/temporalio/sdk-dotnet?tab=readme-ov-file#workflow-utilities) to find deterministic alternatives.

## How to suppress violations

This warning can only be suppressed by disabling the warning in the **ruleset** file for the project.